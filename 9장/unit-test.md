# 클린코드: 챕터 9 - 단위 테스트

### TDD 법칙 3가지

1. 실패하는 단위 테스트를 작성할 때 까지 실제 코드는 작성하지않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
    1. 실패 하는 코드 작성
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

### 테스트 코드가 실제 코드에게 제공하는 이점

- 유연성
- 유지보수성
- 재사용성
- **테스트 케이스가 있으면 변경이 두렵지 않다**
    - 반대로 말하면, **테스트 케이스가 없다면 모든 변경은 잠정적인 bug 이다**

### 테스트 코드도 Clean 해야된다.

- **테스트 코드는 실제 코드 못지않게 중요하다**
- 테스트 코드가 깨끗하지 못하면, 위의 이점들이 사라진다.
    - 즉, 코드를 변경/개선 하는 능력이 떨어진다.
- 실제 코드가 진화하면 테스트코도 변화해야된다.
    - 만약에 테스트 코드가 지저분하고 관리하기 힘든 상태면 큰 문제가 발생.
    - 그러면 테스트 코드를 수정하고, 추가하는 데에 시간을 점점 쓰게 되는 악순환이 발생.
- 테스트 코드가 지저분할 수록 실제 코드도 지저분해지고,
- 결국 테스트 코드를 잃어버리고 실제 코드도 망가진다.

### 깨끗한 테스트 코드를 만들려면 "가독성"이 필요하다

- 가독성을 위해서는 다음이 필요하다.
    - 명료성
    - 단순성
    - 풍부한 표현력
    

### 테스트 당 Assert는 하나만(안된다면 최소화)

- 예외는 있지만, 되도록이면 Assert문은 최소화 하는것이 좋다.
    - Given-when-then 포맷으로 함수명을 지으면, 함수간의 중복이 되는 경우가 많다.
- "테스트 함수 하나당 개념은 하나만 테스트하자"

## FIRST

- **F**ast:
    - 테스트는 빨라야한다.
    - 테스트는 자주 돌려야 초반에 문제를 찾아내서 고칠 수 있다.
    - 테스트가 빨라야 코드를 마음껏 정리할 수 있다.
    - 테스트가 느리면 결국 코드 품질이 망가진다.
- **I**ndependent
    - 각 테스트는 서로 의존하면 안된다.
    - 한 테스트에서 다음 테스트의 환경이 준비되면 안된다.
    - 각 테스트는 독립적으로, 어떠한 순서로 실행해도 괜찮아야한다.
    - 테스트가 서로에게 의존하면 하나가 실패할 때 나머지도 잇달아 실패하므로
        - 원인을 진단하기 어려워지며, 후반 테스트가 찾아내야 할 결함이 숨겨진다.
- **R**epeatable
    - 테스트는 어떤 환경에서도 반복이 가능해야된다.
        - 환경이라함은, 버스에서 와이파이 안될때를 말한다.
        - 테스트가 돌아가지 않는 환경은 테스트가 실패한 이유의 핑계거리가 될 수 있다.
- **S**elf- Validating
    - 테스트는 `bool` 값으로 결과를 내야한다
    - Binary 이다. 즉, 성공, 아니면 실패 여야한다.
    - 테스트는 스스로, 함수내에서 판단이 되어야한다.
- **T**imely
    - 테스트는 실제 코드가 구현되기 직전에 작성 되어야한다
    - 실제 코드를 먼저 구현하면, 실제 코드가 테스트하기 어렵다는 사실을 직면하게 될 수 있다.
